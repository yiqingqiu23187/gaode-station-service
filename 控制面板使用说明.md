# 站点管理控制面板使用说明

## 概述

这是一个基于H5技术的站点管理控制面板，提供了直观的表格界面来查看和编辑数据库中的站点信息。

## 功能特性

### ✅ 已实现的功能

1. **数据展示**
   - 以表格形式展示数据库中的所有站点信息
   - 包含22个字段：ID、站点名称、地址、经纬度、站长信息、面试信息、各类岗位需求等
   - 需求信息已展开为独立列：全职总计、分拣员、白班理货、水产专员、夜班理货、副站长、资深副站长、兼职总计、兼职-分拣员、兼职-白班理货、兼职-夜班理货、兼职-水产专员
   - 支持内置滚动条，自动适配窗口尺寸

2. **在线编辑**
   - 所有字段（除ID外）都可以直接在表格中编辑
   - 基本信息字段支持文本输入，需求字段支持数字输入
   - 修改的字段会高亮显示（橙色边框+浅黄背景）
   - 实时统计修改的记录数量

3. **数据提交**
   - 点击"提交修改"按钮批量保存所有更改
   - 支持事务处理，确保数据一致性
   - 提供详细的成功/失败反馈

4. **数据重置**
   - 点击"重置数据"按钮重新从数据库加载最新数据
   - 清除所有未保存的修改

5. **响应式设计**
   - 采用简洁的蓝色主色调，界面专业大方
   - 支持桌面和移动设备
   - 自适应窗口尺寸变化

## 启动方法

### 1. 安装依赖
```bash
pip install flask flask-cors
```

### 2. 启动服务器
```bash
python web_server.py
```

### 3. 访问控制面板
在浏览器中打开：http://localhost:5000

## 使用方法

### 查看数据
- 页面加载后自动显示所有站点数据
- 使用表格内置滚动条浏览大量数据
- 状态栏显示总记录数和修改数量

### 编辑数据
1. 直接点击表格中的任意字段进行编辑
2. 修改的字段会显示黄色背景提示
3. 支持文本、数字、多行文本等不同类型的输入

### 保存修改
1. 编辑完成后，点击"💾 提交修改"按钮
2. 系统会批量保存所有修改
3. 成功后会显示绿色提示信息并重新加载数据

### 重置数据
1. 点击"🔄 重置数据"按钮
2. 所有未保存的修改将被丢弃
3. 重新从数据库加载最新数据

## 技术架构

### 后端
- **框架**: Flask + Flask-CORS
- **数据库**: SQLite
- **API设计**: RESTful风格

### 前端
- **技术**: 原生HTML5 + CSS3 + JavaScript
- **样式**: 响应式设计，银蓝色主题
- **交互**: 异步AJAX请求

### API端点
- `GET /api/stations` - 获取所有站点数据
- `PUT /api/stations/<id>` - 更新单个站点
- `PUT /api/stations/batch` - 批量更新站点

## 数据库结构

```sql
CREATE TABLE stations (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    station_name TEXT NOT NULL,           -- 站点名称
    address TEXT,                         -- 地址
    longitude REAL NOT NULL,              -- 经度
    latitude REAL NOT NULL,               -- 纬度
    manager_name TEXT,                    -- 站长姓名
    contact_phone TEXT,                   -- 联系电话
    interview_location TEXT,              -- 面试地点
    interview_contact_person TEXT,        -- 面试联系人
    interview_contact_phone TEXT,         -- 面试联系电话
    site_info_str TEXT,                   -- 站点信息
    demand_info_str TEXT                  -- 需求信息
);
```

## 安全注意事项

1. **开发环境**: 当前配置仅适用于开发环境
2. **生产部署**: 生产环境需要使用WSGI服务器（如Gunicorn）
3. **数据备份**: 建议定期备份数据库文件
4. **访问控制**: 生产环境应添加身份验证机制

## 故障排除

### 常见问题

1. **页面无法加载**
   - 检查服务器是否正常启动
   - 确认端口5000未被占用
   - 检查防火墙设置

2. **数据无法保存**
   - 检查数据库文件权限
   - 查看服务器日志错误信息
   - 确认数据格式正确

3. **界面显示异常**
   - 清除浏览器缓存
   - 检查浏览器控制台错误
   - 确认网络连接正常

### 日志查看
服务器运行时会在终端显示访问日志，包括：
- 页面访问记录
- API请求状态
- 错误信息详情

## 扩展功能

可以考虑添加的功能：
- 数据搜索和过滤
- 数据导入导出
- 用户权限管理
- 操作日志记录
- 数据验证规则
- 批量删除功能

## 联系支持

如有问题或建议，请查看：
- 服务器日志信息
- 浏览器开发者工具
- 数据库连接状态
